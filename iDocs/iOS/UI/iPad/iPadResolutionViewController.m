////  iPadErrandReportViewController.m//  iDoc////  Created by Dmitry Likhachev on 02/08/10.//  Copyright 2009 KORUS Consulting. All rights reserved.//#import "iPadResolutionViewController.h"#import "iPadHeaderBodyFooterLayoutView.h"#import "iDocAppDelegate.h"#import "iPadThemeBuildHelper.h"@implementation iPadResolutionViewController#pragma mark custom methods - init- (id)initWithFrame:(CGRect)frame {	NSLog(@"iPadResolution initWithFrame");		if ((self = [super initWithNibName:nil bundle:nil])) {		iPadHeaderBodyFooterLayoutView *container = [[iPadHeaderBodyFooterLayoutView alloc] init];		container.showFooter = NO;		container.frame = frame;				CGRect reportTextViewFrame = container.bodyPanel.bounds;		resolutionTextView = [[UITextView alloc] initWithFrame:reportTextViewFrame];		resolutionTextView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;		resolutionTextView.editable = YES;		resolutionTextView.scrollEnabled = YES;		resolutionTextView.enablesReturnKeyAutomatically = YES;		resolutionTextView.textAlignment = UITextAlignmentLeft;				resolutionTextView.font = [UIFont systemFontOfSize:constMediumFontSize];		resolutionTextView.returnKeyType = UIReturnKeyDefault;		resolutionTextView.autocorrectionType = UITextAutocorrectionTypeDefault;		resolutionTextView.autocapitalizationType = UITextAutocapitalizationTypeNone;		resolutionTextView.keyboardType = UIKeyboardTypeDefault;        resolutionTextView.keyboardAppearance = UIKeyboardAppearanceDefault;		resolutionTextView.backgroundColor = [UIColor clearColor];				[container.bodyPanel addSubview:resolutionTextView];                UIColor *buttonColor = [iPadThemeBuildHelper commonButtonFontColor2];        UIColor *shadowColor = [iPadThemeBuildHelper commonShadowColor2];                 		submitResolutionButton = [container prepareHeaderRightButtonWithCaption:@"SubmitResolutionButtonTitle"                                                                     captionColor:buttonColor                                                                   captionShadow:shadowColor                                                                     imageOrNil:nil];		[submitResolutionButton addTarget:self action:@selector(submitResolutionButtonPressed) forControlEvents:UIControlEventTouchUpInside];		[container.headerPanel addSubview:submitResolutionButton];				UIButton *closeButton = [container prepareHeaderLeftButtonWithCaption:@"CancelButtonTitle"                                                                  captionColor:buttonColor                                                                 captionShadow:shadowColor                                                                   imageOrNil:nil];		[closeButton addTarget:self action:@selector(resolutionViewCloseButtonPressed) forControlEvents:UIControlEventTouchUpInside];		[container.headerPanel addSubview:closeButton];				self.view = container;		[container release];	}	return self;}#pragma mark custom methods - load data- (void)showResolutionForTaskServerAction:(ActionToSync *)newAction {	NSLog(@"iPadResolution showResolutionForServerAction");		action = newAction;	resolutionTextView.text = constEmptyStringValue;    [resolutionTextView becomeFirstResponder];}#pragma mark custom methods - panel behavior- (void)setDelegate:(id<iPadResolutionViewControllerDelegate>)newDelegate {	delegate = newDelegate;}- (void)resolutionViewCloseButtonPressed {	NSLog(@"iPadResolution resolutionViewCloseButtonPressed");	if (delegate != nil && [delegate respondsToSelector:@selector(resolutionViewCloseButtonPressed)]) {		[delegate resolutionViewCloseButtonPressed];	}	}- (void)submitResolutionButtonPressed {	NSLog(@"iPadResolution submitResolutionButtonPressed");	    if (resolutionTextView.text != nil && ![resolutionTextView.text isEqualToString:constEmptyStringValue]) {            if (delegate != nil && [delegate respondsToSelector:@selector(submitActionWithResolutionToServer:)]) {            action.actionResolution = resolutionTextView.text;            [delegate submitActionWithResolutionToServer:action];        }    }	else {		NSString *errorMessage = [NSString stringWithFormat:@"%@ %@",                                   NSLocalizedString(@"RequiredFieldsNotFilledMessage", nil),                                  NSLocalizedString(@"RequiredFieldResolutionText", nil)];				[self reportClientError:errorMessage];	}}- (void)setTitleForPopupPanelHeader:(NSString *)newTitle {	iPadHeaderBodyFooterLayoutView *container = (iPadHeaderBodyFooterLayoutView *)self.view;	[[container.headerPanel viewWithTag:constHeaderCenterTitleWithCaption] removeFromSuperview];    UIColor *titleColor = [iPadThemeBuildHelper commonHeaderFontColor2];    UIColor *shadowColor = [iPadThemeBuildHelper commonShadowColor2];     	[container.headerPanel addSubview:[container prepareHeaderCenterTitleWithCaption:NSLocalizedString(newTitle, nil)                                                                         captionColor:titleColor                                                                    captionShadow:shadowColor]];}#pragma mark other methods- (void)didReceiveMemoryWarning {	NSLog(@"iPadResolution didReceiveMemoryWarning");		    // Releases the iPadSearchFilter if it doesn't have a superview.    [super didReceiveMemoryWarning];    // Release any cached data, images, etc. that aren't in use.}- (void)dealloc {	[resolutionTextView release];    [super dealloc];}@end